import{i as k}from"./index-c11b1bdc.js";import{T as y,S as M}from"./Topbar-560421af.js";import{Q as E}from"./vue-quill.snow-f443f815.js";import{r as m,o as r,c,a as p,b as e,n as g,t as i,F as v,d as b,w as _,v as u,i as j}from"./index-bf7f2086.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-30c9d580.js";console.log(document.cookie);const C={name:"adminevent",components:{Topbar:y,Sidebar:M,QuillEditor:E},data(){return{toptitle:"Event",baseURL:"http://localhost:3000",tableEvent:[],message:{title:"gagal",text:""},warning:!1,background:"",alertmessage:"",modalTitle:"",datamodal:[],model_event:{id:"",judul:"",poster:"",start:"",end:"",deskripsi:""}}},methods:{deleteEvent(){let o="http://localhost:3000",l="/events/hapus",n="Bearer "+localStorage.getItem("token");fetch(o+l,{method:"POST",headers:{Authorization:n,Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({id:this.model_event.id})}).then(s=>s.json()).then(s=>{s.status==="OK"?(this.message.title="success",this.message.text="Berhasil Hapus Event",this.getAll(),my_modal_5.close(),this.setModelDefault(),this.messageModal()):(this.message.title="failed",this.message.text="Gagal Hapus Event",my_modal_5.close(),this.messageModal())}).catch(s=>{this.message.title="failed!",this.message.text="Gagal Hapus Event",my_modal_5.close(),this.setModelDefault(),this.messageModal(),console.log(s)})},showModaldelete(o){this.model_event.id=o.id,my_modal_5.showModal()},showModaledit(o){this.modalTitle="Edit",this.model_event.judul=o.judul,this.model_event.start=o.start,this.model_event.end=o.end,this.model_event.deskripsi=o.deskripsi,this.model_event.id=o.id,my_modal_3.showModal()},messageModal(){my_modal_4.showModal()},save(){if(this.modalTitle==="Create"){let o="http://localhost:3000",l="/events/create",n="Bearer "+localStorage.getItem("token"),s=new FormData;s.append("judul",this.model_event.judul),s.append("file",this.model_event.poster),s.append("start",this.model_event.start),s.append("end",this.model_event.end),s.append("deskripsi",this.model_event.deskripsi),fetch(o+l,{method:"POST",headers:{Authorization:n},body:s}).then(t=>t.json()).then(t=>{t.status==="OK"?(this.message.title="success",this.message.text="Berhasil Memposting Event",this.getAll(),my_modal_3.close(),this.setModelDefault(),this.messageModal()):(this.message.title="failed",this.message.text="Gagal Memposting Event",this.messageModal())}).catch(t=>{this.message.title="failed!",this.message.text="Gagal Memposting Event",this.messageModal(),console.log(t)})}else{let o="http://localhost:3000",l="/events/update",n="Bearer "+localStorage.getItem("token"),s=new FormData;this.model_event.poster&&s.append("file",this.model_event.poster),s.append("id",this.model_event.id),s.append("judul",this.model_event.judul),s.append("start",this.model_event.start),s.append("end",this.model_event.end),s.append("deskripsi",this.model_event.deskripsi),fetch(o+l,{method:"PUT",headers:{Authorization:n},body:s}).then(t=>t.json()).then(t=>{t.status==="OK"?(this.message.title="success",this.message.text="Berhasil Update Event",this.setModelDefault(),this.getAll(),my_modal_3.close(),this.messageModal()):(this.message.title="failed",this.message.text="Gagal Update Event",this.messageModal())}).catch(t=>{this.message.title="failed!",this.message.text="Gagal Update Event",this.messageModal(),console.log(t)})}},setModelDefault(){this.model_event.judul="",this.model_event_poster="",this.model_event.start="",this.model_event.end="",this.model_event.deskripsi="",this.model_event.id=""},previewFiles(o){console.log(o.target.files[0]),this.model_event.poster=o.target.files[0]},async createEventModal(){this.modalTitle="Create",await this.setModelDefault(),my_modal_3.showModal()},showDetail(o){this.datamodal=o,my_modal_2.showModal()},getAll(){let o="http://localhost:3000",l="/events/";""+localStorage.getItem("token"),fetch(o+l,{method:"GET",credentials:"include",headers:{"Bypass-Tunnel-Reminder":"true",Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{this.tableEvent=n.data})}},mounted:function(){k(),this.getAll()},created:function(){let o="http://localhost:3000",l="/users/isloggedin",n="Bearer "+localStorage.getItem("token");fetch(o+l,{method:"GET",credentials:"include",headers:{Authorization:n,"Bypass-Tunnel-Reminder":"true",Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(s=>s.json()).then(s=>{(s.status!==200||s.isAdmin==!1)&&this.$router.push({name:"login"}),console.log(s.status)}).catch(s=>{this.$router.push({name:"login"})})}},A={class:"flex bg-white"},S={class:"w-full"},U={class:"w-full px-[5%] py-[5%]"},B={class:"relative overflow-x-auto sm:rounded-lg"},D={class:"flex items-center justify-between"},L=j('<label for="table-search" class="sr-only">Search</label><div class="relative"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><svg class="w-5 h-5 text-gray-500 dark:text-gray-400" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg></div><input type="text" id="table-search" class="block p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Pencarian"></div>',2),R={class:"w-full max-h-96 mt-10 overflow-y-scroll"},z={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},F=e("thead",{class:"text-xs sticky top-0 text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Poster"),e("th",{scope:"col",class:"px-6 py-3"},"Judul Event"),e("th",{scope:"col",class:"px-6 py-3"},"Action")])],-1),G={class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},P={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},H=["src"],O={class:"px-6 py-4"},V={class:"px-6 py-4"},I={class:"flex gap-2"},J=["onClick"],N=["onClick"],Q=["onClick"],K={id:"my_modal_2",class:"modal"},Y={class:"modal-box"},q=e("h3",{class:"font-bold pb-2 text-center"},"Detail Event",-1),W={class:"font-light text-xs border-b pb-2 text-center"},X={class:"w-full"},Z={class:"flex gap-4 mt-3"},$=e("p",{class:"w-[37%]"},"Judul Event",-1),ee={class:"flex gap-4"},te=e("p",{class:"w-[37%]"},"mulai event ",-1),se={class:"flex gap-4"},le=e("p",{class:"w-[37%]"},"akhir event ",-1),oe={class:"flex gap-4"},ae=e("p",{class:"w-[37%]"},"di post oleh",-1),ne={class:"flex gap-4"},ie=e("p",{class:"w-[37%]"},"dipost pada ",-1),de={class:"mt-5"},re=e("p",{class:"w-fit border-b pb-1 pr-3"},"Deskripsi ",-1),ce=["innerHTML"],he={class:"w-full h-fit overflow-y-scroll"},me={class:"w-full flex"},pe=["href"],_e=e("form",{method:"dialog",class:"modal-backdrop"},[e("button",null,"close")],-1),ue={id:"my_modal_3",class:"modal"},ge={class:"modal-box bg-white text-black"},ve={class:"font-bold pb-2 text-center"},be=e("h3",{class:"font-light text-xs border-b pb-2 text-center"},null,-1),fe={class:"w-full"},xe=e("p",{class:"mb-2 mt-2 ml-2"},"Judul Event",-1),we=e("p",{class:"mb-3 mt-2 ml-2"},"Poster event :",-1),ke=e("p",{class:"mb-2 mt-2 ml-2"},"Mulai Event",-1),ye=e("p",{class:"mb-2 mt-2 ml-2"},"Akhir Event",-1),Me=e("p",{class:"mb-2 mt-2 ml-2"},"Deskripsi Event",-1),Ee=e("form",{method:"dialog",class:"modal-backdrop"},[e("button",null,"close")],-1),je={id:"my_modal_4",class:"modal bg-white"},Te={class:"font-bold text-lg text-center uppercase"},Ce=e("p",{class:"py-4 text-center"},"Press ESC key or click the button below to close",-1),Ae=e("div",{class:"modal-action"},[e("button",{class:"btn w-full bg-slate-600 text-white"},"Close")],-1),Se={id:"my_modal_5",class:"modal"},Ue={method:"dialog",class:"modal-box bg-white"},Be={class:"alert bg-red-600 text-white"},De=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-info shrink-0 w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Le=e("span",null,"Hapus Event ?",-1),Re={class:"flex gap-2"},ze=e("button",{class:"btn btn-sm"},"Tidak",-1),Fe=e("form",{method:"dialog",class:"modal-backdrop"},[e("button",null,"close")],-1);function Ge(o,l,n,s,t,d){const f=m("Sidebar"),x=m("Topbar"),w=m("QuillEditor");return r(),c("div",A,[p(f),e("div",S,[p(x,{toptitle:t.toptitle},null,8,["toptitle"]),e("div",U,[e("div",B,[e("div",D,[e("div",null,[e("button",{onClick:l[0]||(l[0]=a=>d.createEventModal()),class:"btn btn-success text-white"},"Add")]),L])]),e("div",{class:g([t.warning?t.background+"block":"hidden","w-full px-5 py-2 text-center"])},i(t.alertmessage),3),e("div",R,[e("table",z,[F,e("tbody",null,[(r(!0),c(v,null,b(t.tableEvent,a=>(r(),c("tr",G,[e("td",P,[e("img",{src:t.baseURL+"/"+a.poster,alt:"",class:"w-36"},null,8,H)]),e("td",O,i(a.judul),1),e("td",V,[e("div",I,[e("button",{class:"btn",onClick:h=>d.showDetail(a)},"detail",8,J),e("button",{onClick:h=>d.showModaledit(a),class:"btn btn-warning text-white"},"update",8,N),e("button",{onClick:h=>d.showModaldelete(a),class:"btn bg-red-700 text-white"},"delete",8,Q)])])]))),256))])])])]),e("dialog",K,[e("div",Y,[q,e("h3",W,i(t.datamodal.tanggal),1),e("div",X,[e("div",Z,[$,e("p",null,": "+i(t.datamodal.judul),1)]),e("div",ee,[te,e("p",null,": "+i(t.datamodal.start),1)]),e("div",se,[le,e("p",null,": "+i(t.datamodal.end),1)]),e("div",oe,[ae,e("p",null,": "+i(t.datamodal.create_by),1)]),e("div",ne,[ie,e("p",null,": "+i(t.datamodal.tanggal),1)]),e("div",de,[re,e("p",{innerHTML:t.datamodal.deskripsi},null,8,ce)]),e("div",he,[e("div",me,[(r(!0),c(v,null,b(t.datamodal.docs,(a,h)=>(r(),c("a",{href:t.baseURL+"/"+a.url_dokumen,target:"_blank",class:"btn mt-2 mr-2"},i(a.jenis_docs),9,pe))),256))])])])]),_e]),e("dialog",ue,[e("div",ge,[e("h3",ve,i(t.modalTitle)+" Event",1),be,e("div",fe,[xe,_(e("input",{type:"text",class:"w-full rounded-xl text-black","onUpdate:modelValue":l[1]||(l[1]=a=>t.model_event.judul=a)},null,512),[[u,t.model_event.judul]]),we,e("input",{type:"file",class:"w-full rounded-xl text-black",onChange:l[2]||(l[2]=(...a)=>d.previewFiles&&d.previewFiles(...a)),multiple:!1},null,32),ke,_(e("input",{type:"date",class:"w-full rounded-xl text-black","onUpdate:modelValue":l[3]||(l[3]=a=>t.model_event.start=a)},null,512),[[u,t.model_event.start]]),ye,_(e("input",{type:"date",class:"w-full rounded-xl text-black","onUpdate:modelValue":l[4]||(l[4]=a=>t.model_event.end=a)},null,512),[[u,t.model_event.end]]),Me,p(w,{contentType:"html",theme:"snow",content:t.model_event.deskripsi,"onUpdate:content":l[5]||(l[5]=a=>t.model_event.deskripsi=a)},null,8,["content"]),e("button",{onClick:l[6]||(l[6]=a=>d.save()),class:"btn w-full bg-green-600 mt-5 hover:bg-green-300"},"Save")])]),Ee]),e("dialog",je,[e("form",{method:"dialog",class:g(["modal-box",t.message.title==="success"?"bg-green-600":"bg-red-600"])},[e("h3",Te,i(t.message.title),1),Ce,Ae],2)]),e("dialog",Se,[e("form",Ue,[e("div",Be,[De,Le,e("div",Re,[ze,e("button",{onClick:l[7]||(l[7]=a=>d.deleteEvent()),class:"btn btn-sm btn-primary"},"Ya")])])]),Fe])])])}const Ne=T(C,[["render",Ge]]);export{Ne as default};
