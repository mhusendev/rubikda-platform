import{i as x}from"./index-c11b1bdc.js";import{T as k,S as w}from"./Topbar-6a770fb2.js";import{Q as W}from"./vue-quill.snow-515423ed.js";import{r as p,o as d,c as r,a as g,b as e,n as _,t as i,F as u,d as b,w as h,g as M,v as m,i as T}from"./index-1ee89a4b.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-30c9d580.js";console.log(document.cookie);const j={name:"adminwinners",components:{Topbar:k,Sidebar:w,QuillEditor:W},data(){return{toptitle:"Pemenang",baseURL:"https://772e-116-206-14-60.ngrok-free.app",tableWinners:[],listInovasi:[],selectedInovasi:"--pilih--",message:{title:"gagal",text:""},warning:!1,background:"",alertmessage:"",modalTitle:"",datamodal:[],modelWinners:{id:"",nama_inovasi:"",nm_perangkat_daerah:"",nilai:"",tanggal_inovasi:"",event:""}}},methods:{setSelectedInovasi(){this.modelWinners.nama_inovasi=this.selectedInovasi.nama_inovasi,this.modelWinners.nm_perangkat_daerah=this.selectedInovasi.nama_perangkat_daerah,this.modelWinners.tanggal_inovasi=this.selectedInovasi.tanggal},deleteData(){let a="https://772e-116-206-14-60.ngrok-free.app",t="/winners/delete",o="Bearer "+localStorage.getItem("token");fetch(a+t,{method:"POST",headers:{Authorization:o,Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({id:this.modelWinners.id})}).then(n=>n.json()).then(n=>{n.status==="OK"?(this.message.title="success",this.message.text="Berhasil Dihapus",this.getAll(),my_modal_5.close(),this.setModelDefault(),this.messageModal()):(this.message.title="failed",this.message.text="Gagal Dihapus",my_modal_5.close(),this.messageModal())}).catch(n=>{this.message.title="failed!",this.message.text="Gagal Hapus Event",my_modal_5.close(),this.setModelDefault(),this.messageModal(),console.log(n)})},showModaldelete(a){this.modelWinners.id=a.id,my_modal_5.showModal()},showModaledit(a){this.modalTitle="Edit",this.modelWinners.id=a.id,this.modelWinners.nama_inovasi=a.nama_inovasi,this.modelWinners.nm_perangkat_daerah=a.nm_perangkat_daerah,this.modelWinners.tanggal_inovasi=a.tanggal_inovasi,this.modelWinners.nilai=a.nilai,this.modelWinners.event=a.event,my_modal_3.showModal()},messageModal(){my_modal_4.showModal()},update(){fetch("https://772e-116-206-14-60.ngrok-free.app"+"/winners/update",{method:"PUT",credentials:"include",withCredentials:!0,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(this.modelWinners)}).then(o=>o.json()).then(o=>{o.status==="OK"?(this.message.title="success",this.message.text=o.message,this.getAll(),my_modal_3.close(),this.setModelDefault(),this.messageModal()):(this.message.title="failed",this.message.text=o.message,this.messageModal())})},save(){this.modelWinners.nama_inovasi=this.selectedInovasi.nama_inovasi,console.log(this.modelWinners),fetch("https://772e-116-206-14-60.ngrok-free.app"+"/winners/create",{method:"POST",credentials:"include",withCredentials:!0,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(this.modelWinners)}).then(o=>o.json()).then(o=>{o.status==="OK"?(this.message.title="success",this.message.text=o.message,this.getAll(),my_modal_3.close(),this.setModelDefault(),this.messageModal()):(this.message.title="failed",this.message.text=o.message,this.messageModal())})},setModelDefault(){this.modelWinners.nama_inovasi="",this.modelWinners.nilai="",this.modelWinners.nm_perangkat_daerah="",this.modelWinners.tanggal_inovasi="",this.modelWinners.event=""},async showModalAdd(){this.modalTitle="Beri Nilai",await this.setModelDefault(),my_modal_3.showModal()},showDetail(a){this.datamodal=a,my_modal_2.showModal()},getAll(){let a="https://772e-116-206-14-60.ngrok-free.app",t="/winners/list";""+localStorage.getItem("token"),fetch(a+t,{method:"GET",credentials:"include",headers:{"Bypass-Tunnel-Reminder":"true",Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(o=>o.json()).then(o=>{this.tableWinners=o.data})},getInovasi(){let a="https://772e-116-206-14-60.ngrok-free.app",t="/inovasi/";""+localStorage.getItem("token"),fetch(a+t,{method:"GET",credentials:"include",headers:{"Bypass-Tunnel-Reminder":"true",Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(o=>o.json()).then(o=>{this.listInovasi=o})}},mounted:function(){x(),this.getAll(),this.getInovasi()},created:function(){let a="https://772e-116-206-14-60.ngrok-free.app",t="/users/isloggedin",o="Bearer "+localStorage.getItem("token");fetch(a+t,{method:"GET",credentials:"include",headers:{Authorization:o,"Bypass-Tunnel-Reminder":"true",Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{(n.status!==200||n.isAdmin==!1)&&this.$router.push({name:"login"}),console.log(n.status)}).catch(n=>{this.$router.push({name:"login"})})}},I={class:"flex bg-white"},S={class:"w-full"},A={class:"w-full px-[5%] py-[5%]"},U={class:"relative overflow-x-auto sm:rounded-lg"},B={class:"flex items-center justify-between"},D=T('<label for="table-search" class="sr-only">Cari</label><div class="relative"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><svg class="w-5 h-5 text-gray-500 dark:text-gray-400" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg></div><input type="text" id="table-search" class="block p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Pencarian"></div>',2),E={class:"w-full max-h-96 mt-10 overflow-y-scroll"},N={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},R=e("thead",{class:"text-xs sticky top-0 text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Nama"),e("th",{scope:"col",class:"px-6 py-3"},"Perangkat Daerah"),e("th",{scope:"col",class:"px-6 py-3"},"Tanggal"),e("th",{scope:"col",class:"px-6 py-3"},"Nilai"),e("th",{scope:"col",class:"px-6 py-3"},"Event"),e("th",{scope:"col",class:"px-6 py-3"},"Opsi")])],-1),L={class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},O={scope:"row",class:"px-6 py-4"},V={class:"px-6 py-4"},P={class:"px-6 py-4"},z={class:"px-6 py-4"},G={class:"px-6 py-4"},F={class:"px-6 py-4"},J={class:"flex gap-2"},K=["onClick"],H=["onClick"],Q={id:"my_modal_3",class:"modal"},Y={class:"modal-box bg-white text-black"},q={class:"font-bold pb-2 text-center"},X=e("h3",{class:"font-light text-xs border-b pb-2 text-center"},null,-1),Z={class:"w-full"},$=e("option",{value:"--pilih--"},"--pilih inovasi--",-1),ee=["value"],te=e("p",{class:"mt-5 mb-2"},"Perangkat Daerah",-1),se=e("p",{class:"mt-5 mb-2"},"Tanggal Inovasi",-1),oe=e("p",{class:"mt-5 mb-2"},"Nilai",-1),le=e("p",{class:"mt-5 mb-2"},"Event",-1),ae=e("form",{method:"dialog",class:"modal-backdrop"},[e("button",null,"close")],-1),ne={id:"my_modal_4",class:"modal bg-white"},ie={class:"font-bold text-lg text-center uppercase"},de={class:"py-4 text-center"},re=e("div",{class:"modal-action"},[e("button",{class:"btn w-full bg-slate-600 text-white"},"Close")],-1),ce={id:"my_modal_5",class:"modal"},he={method:"dialog",class:"modal-box bg-white"},me={class:"alert bg-red-600 text-white"},pe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-info shrink-0 w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ge=e("span",null,"Hapus Event ?",-1),_e={class:"flex gap-2"},ue=e("button",{class:"btn btn-sm"},"Tidak",-1),be=e("form",{method:"dialog",class:"modal-backdrop"},[e("button",null,"close")],-1);function ve(a,t,o,n,l,c){const v=p("Sidebar"),f=p("Topbar");return d(),r("div",I,[g(v),e("div",S,[g(f,{toptitle:l.toptitle},null,8,["toptitle"]),e("div",A,[e("div",U,[e("div",B,[e("div",null,[e("button",{onClick:t[0]||(t[0]=s=>c.showModalAdd()),class:"btn btn-success text-white"},"Beri Nilai")]),D])]),e("div",{class:_([l.warning?l.background+"block":"hidden","w-full px-5 py-2 text-center"])},i(l.alertmessage),3),e("div",E,[e("table",N,[R,e("tbody",null,[(d(!0),r(u,null,b(l.tableWinners,s=>(d(),r("tr",L,[e("td",O,i(s.nama_inovasi),1),e("td",V,i(s.nm_perangkat_daerah),1),e("td",P,i(s.tanggal_inovasi),1),e("td",z,i(s.nilai),1),e("td",G,i(s.event),1),e("td",F,[e("div",J,[e("button",{onClick:y=>c.showModaledit(s),class:"btn btn-warning text-white"},"update",8,K),e("button",{onClick:y=>c.showModaldelete(s),class:"btn bg-red-700 text-white"},"delete",8,H)])])]))),256))])])])]),e("dialog",Q,[e("div",Y,[e("h3",q,i(l.modalTitle),1),X,e("div",Z,[l.modalTitle!=="Edit"?h((d(),r("select",{key:0,class:"w-full","onUpdate:modelValue":t[1]||(t[1]=s=>l.selectedInovasi=s),onChange:t[2]||(t[2]=s=>c.setSelectedInovasi())},[$,(d(!0),r(u,null,b(l.listInovasi,s=>(d(),r("option",{value:s},i(s.nama_inovasi),9,ee))),256))],544)),[[M,l.selectedInovasi]]):h((d(),r("input",{key:1,type:"text",class:"w-full",readonly:"","onUpdate:modelValue":t[3]||(t[3]=s=>l.modelWinners.nama_inovasi=s)},null,512)),[[m,l.modelWinners.nama_inovasi]]),te,h(e("input",{type:"text",class:"w-full",readonly:"","onUpdate:modelValue":t[4]||(t[4]=s=>l.modelWinners.nm_perangkat_daerah=s)},null,512),[[m,l.modelWinners.nm_perangkat_daerah]]),se,h(e("input",{type:"text",class:"w-full",readonly:"","onUpdate:modelValue":t[5]||(t[5]=s=>l.modelWinners.tanggal_inovasi=s)},null,512),[[m,l.modelWinners.tanggal_inovasi]]),oe,h(e("input",{type:"text",class:"w-full","onUpdate:modelValue":t[6]||(t[6]=s=>l.modelWinners.nilai=s)},null,512),[[m,l.modelWinners.nilai]]),le,h(e("input",{type:"text",class:"w-full","onUpdate:modelValue":t[7]||(t[7]=s=>l.modelWinners.event=s)},null,512),[[m,l.modelWinners.event]]),l.modalTitle!=="Edit"?(d(),r("button",{key:2,onClick:t[8]||(t[8]=s=>c.save()),class:"btn w-full bg-green-600 mt-5 hover:bg-green-300"},"Save")):(d(),r("button",{key:3,onClick:t[9]||(t[9]=s=>c.update()),class:"btn w-full bg-blue-600 mt-5 hover:bg-green-300"},"Update Nilai"))])]),ae]),e("dialog",ne,[e("form",{method:"dialog",class:_(["modal-box",l.message.title==="success"?"bg-green-600":"bg-red-600"])},[e("h3",ie,i(l.message.title),1),e("p",de,i(l.message.text),1),re],2)]),e("dialog",ce,[e("form",he,[e("div",me,[pe,ge,e("div",_e,[ue,e("button",{onClick:t[10]||(t[10]=s=>c.deleteData()),class:"btn btn-sm btn-primary"},"Ya")])])]),be])])])}const Me=C(j,[["render",ve]]);export{Me as default};
